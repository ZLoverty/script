<!DOCTYPE html>
<html  lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

      <title>extract</title>
    
          <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
          <link rel="stylesheet" href="_static/theme.css " type="text/css" />
      
      <!-- sphinx script_files -->
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>

      
      <!-- bundled in js (rollup iife) -->
      <!-- <script src="_static/theme-vendors.js"></script> -->
      <script src="_static/theme.js" defer></script>
    
  <link rel="index" title="Index" href="genindex.html" />
  <link rel="search" title="Search" href="search.html" />
  <link rel="next" title="flowrate" href="flowrate.html" />
  <link rel="prev" title="crop_channel" href="crop_channel.html" /> 
  </head>

  <body>
    <div id="app">
    <div class="theme-container" :class="pageClasses"><navbar @toggle-sidebar="toggleSidebar">
  <router-link to="index.html" class="home-link">
    
      <span class="site-name">script</span>
    
  </router-link>

  <div class="links">
    <navlinks class="can-hide">



    </navlinks>
  </div>
</navbar>

      
      <div class="sidebar-mask" @click="toggleSidebar(false)">
      </div>
        <sidebar @toggle-sidebar="toggleSidebar">
          
          <navlinks>
            



            
          </navlinks><div id="searchbox" class="searchbox" role="search">
  <div class="caption"><span class="caption-text">Quick search</span>
    <div class="searchformwrapper">
      <form class="search" action="search.html" method="get">
        <input type="text" name="q" />
        <input type="submit" value="Search" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div><div class="sidebar-links" role="navigation" aria-label="main navigation">
  
    <div class="sidebar-group">
      <p class="caption">
        <span class="caption-text"><a href="index.html#contents">contents</a></span>
      </p>
      <ul class="current">
        
          <li class="toctree-l1 ">
            
              <a href="PIV.html" class="reference internal ">PIV</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="apply_mask.html" class="reference internal ">apply_mask</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="batch_gen_preview.html" class="reference internal ">batch_gen_preview</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="batch_mean_velocity.html" class="reference internal ">batch_mean_velocity</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="batch_spatial_correlation.html" class="reference internal ">batch_spatial_correlation</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="batch_to_tif.html" class="reference internal ">batch_to_tif</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="batch_to_vid.html" class="reference internal ">batch_to_vid</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="batch_velocity_autocorr.html" class="reference internal ">batch_velocity_autocorr</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="bpass.html" class="reference internal ">bpass</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="bpass_mh.html" class="reference internal ">bpass_mh</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="circulation_order_parameter.html" class="reference internal ">circulation_order_parameter</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="collect_preview.html" class="reference internal ">collect_preview</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="correction.html" class="reference internal ">correction</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="crop_channel.html" class="reference internal ">crop_channel</a>
            

            
          </li>

        
          <li class="toctree-l1 current">
            
              <a href="#" class="reference internal current">extract</a>
            

            
              <ul>
                
                  <li class="toctree-l2"><a href="#extract" class="reference internal">extract</a></li>
                
              </ul>
            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="flowrate.html" class="reference internal ">flowrate</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="gen_preview.html" class="reference internal ">gen_preview</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="ij_piv.html" class="reference internal ">ij_piv</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="mean_velocity.html" class="reference internal ">mean_velocity</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="moving_mask_piv.html" class="reference internal ">moving_mask_piv</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="myautodoc.html" class="reference internal ">myautodoc</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="piv_drop.html" class="reference internal ">piv_drop</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="piv_overlay.html" class="reference internal ">piv_overlay</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="remove_background.html" class="reference internal ">remove_background</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="rename_ij_piv.html" class="reference internal ">rename_ij_piv</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="small_imseq.html" class="reference internal ">small_imseq</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="spatial_correlation.html" class="reference internal ">spatial_correlation</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="to_tif.html" class="reference internal ">to_tif</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="to_vid.html" class="reference internal ">to_vid</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="tracking.html" class="reference internal ">tracking</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="velocity_autocorr.html" class="reference internal ">velocity_autocorr</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="wrap_piv.html" class="reference internal ">wrap_piv</a>
            

            
          </li>

        
      </ul>
    </div>
  
</div>
        </sidebar>

      <page>
          <div class="body-header" role="navigation" aria-label="navigation">
  
  <ul class="breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
    
    <li>extract</li>
  </ul>
  

  <ul class="page-nav">
  <li class="prev">
    <a href="crop_channel.html"
       title="previous chapter">← crop_channel</a>
  </li>
  <li class="next">
    <a href="flowrate.html"
       title="next chapter">flowrate →</a>
  </li>
</ul>
  
</div>
<hr>
          <div class="content" role="main" v-pre>
            
  <section id="extract">
<h1>extract<a class="headerlink" href="#extract" title="Permalink to this heading">¶</a></h1>
<p>This program extracts light-weight information from data generated by <strong>bacteria.vi</strong> at Clement lab, PMMH, ESPCI.</p>
<p>Videos will be recognized in pairs: <em>anchor</em> and <em>record</em>. Original video folders are named as “yyyy-mm-dd_hhhmmmsss”. Anchor video folders will be renamed by adding “_ref_n” at the end of the original name, and the corresponding record video will be renamed by adding “_n” at the end of the original name. So after a day of experiment, we will have a main folder containing subfolders, with the following structure:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">|-- main folder</span>
<span class="go">    |-- 2021-07-21_16h02m43s_ref_1</span>
<span class="go">    |-- 2021-07-21_16h02m43s_1</span>
<span class="go">    |-- 2021-07-21_16h03m43s_ref_2</span>
<span class="go">    |-- 2021-07-21_16h03m43s_2</span>
<span class="go">    |-- 2021-07-21_16h04m43s_ref_3</span>
<span class="go">    |-- 2021-07-21_16h04m43s_3</span>
<span class="go">    |-- ...</span>
</pre></div>
</div>
<p>This code will extract the 1st image “ref.tif” from an anchor video, for example in “2021-07-21_16h02m43s_ref_1”. Text files “Track.txt”, “StagePosition.txt” and “RawImageInfo.txt” in the corresponding record video folder will be extracted, too. These 4 files will be saved under folder “main folder/extract/n”.</p>
<p>The resulting folder structure will be the following:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">|-- main folder</span>
<span class="go">    |-- 2021-07-21_16h02m43s_ref_1</span>
<span class="go">    |-- 2021-07-21_16h02m43s_1</span>
<span class="go">    |-- 2021-07-21_16h03m43s_ref_2</span>
<span class="go">    |-- 2021-07-21_16h03m43s_2</span>
<span class="go">    |-- 2021-07-21_16h04m43s_ref_3</span>
<span class="go">    |-- 2021-07-21_16h04m43s_3</span>
<span class="go">    |-- ...</span>
<span class="go">    |-- extract</span>
<span class="go">        |-- 1</span>
<span class="go">            |-- ref.tif</span>
<span class="go">            |-- Track.txt</span>
<span class="go">            |-- StagePosition.txt</span>
<span class="go">            |-- RawImageInfo.txt</span>
<span class="go">        |-- 2</span>
<span class="go">        |-- 3</span>
<span class="go">        |-- ...</span>
</pre></div>
</div>
<p class="rubric">Usage</p>
<ol class="arabic simple">
<li><p>In command line, enter the directory of <strong>extract.py</strong></p></li>
<li><p>Run <cite>python extract.py main_folder</cite>, here the main_folder is the folder containing video subfolders.</p></li>
</ol>
<p class="rubric">Syntax</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python extract.py main_folder</span>
</pre></div>
</div>
<p class="rubric">Edit</p>
<ul class="simple">
<li><p>Oct 06, 2021 – Initial commit.</p></li>
<li><p>Oct 07, 2021 – Add date stamp to the extracted folders. Number format changes to %04d. “{:04d}_yyyy-mm-dd”. Change the condition to ignore folder. Now ignore everything that has less than 2 “_“‘s.</p></li>
<li><p>Sep 20, 2022 – Only read the first image from binary .raw file, instead of loading whole stack and slice the first image. This should speed up the program. Check if extract exists, if so, continue.</p></li>
</ul>
</section>


          </div>
          <div class="page-nav">
            <div class="inner"><ul class="page-nav">
  <li class="prev">
    <a href="crop_channel.html"
       title="previous chapter">← crop_channel</a>
  </li>
  <li class="next">
    <a href="flowrate.html"
       title="next chapter">flowrate →</a>
  </li>
</ul><div class="footer" role="contentinfo">
      &#169; Copyright 2022, Zhengyang Liu.
    <br>
    Created using <a href="http://sphinx-doc.org/">Sphinx</a> 6.1.3 with <a href="https://github.com/schettino72/sphinx_press_theme">Press Theme</a> 0.8.0.
</div>
            </div>
          </div>
      </page>
    </div></div>
    
    
  </body>
</html>